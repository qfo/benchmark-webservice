// General configuration used in all profiles
manifest {
  description = 'QfO orthology benchmark service'
}

// Profiles configure nextflow depending on the environment (local, integration, live, etc.)
profiles {
  standard {
    process {
      withLabel: py {
        container = "qfo_python:latest"
      }
    }

    process {
      withLabel: darwin {
        container = "qfo_darwin:latest"
      }
    }

    docker{
      enabled = true
      runOptions = '--mount "type=volume,source=refset${params.event_year},target=/refset,readonly"'
    }

    params.refset = "/refset"
    env.QFO_REFSET_PATH = "$params.refset"
  }
}

// default parameter values

params  {

  // submitted file
  predictions_file = "$baseDir/example/oma-groups.orthoxml.gz"

  // name of the tool used for the predicitions
  participant_name = "OMA Groups"

  // GO specific parameters
  go_evidences = "exp"

  //name or OEB permanent ID for the benchmarking community
  community_id = "QfO"

  // benchmarks to be performed
  challenges_ids = "GO EC SwissTree TreeFam STD_Eukaryota STD_Fungi STD_Bacteria G_STD_Luca G_STD_Eukaryota G_STD_Vertebrata G_STD_Fungi G_STD2_Luca"

  event_year = 2018

  // directories where results will be written
  results_dir = "out"
  validation_result = "${params.results_dir}/participant_out"
  assessment_results = "${params.results_dir}/assessment_out"
  aggregation_results = "${params.results_dir}/results"
  statistics_results = "${params.results_dir}/stats"
  data_model_export_dir = "${params.results_dir}/benchmarking_data_model_export"
  other_dir = "${params.results_dir}/other"

  help = false
}


// By default output execution reports
timeline {
  enabled = true
  file = "${params.statistics_results}/timeline.html"
}
report {
  enabled = true
  file = "${params.statistics_results}/report.html"
}
trace {
  enabled = true
  file = "${params.statistics_results}/trace.txt"
}
dag {
  enabled = true
  file = "${params.statistics_results}/DAG.dot"
}